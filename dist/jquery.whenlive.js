/*! whenlive 2014-01-12 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(this,function(a){!function(b){function c(a){a||(a=b.whenLiveElements[c].options.context||document.documentElement);for(var c in b.whenLiveElements)(b.contains(a,b.whenLiveElements[c].elem[0])||a===b.whenLiveElements[c].elem[0])&&(b.whenLiveElements[c].options.visibility?b.whenLiveElements[c].elem.is(":visible")&&(b.whenLiveElements[c].fn.call(b.whenLiveElements[c].elem),b.whenLiveElements.splice(c)):(b.whenLiveElements[c].fn.call(b.whenLiveElements[c].elem),b.whenLiveElements.splice(c)))}var d=window.MutationObserver||window.WebKitMutationObserver;b.fn.whenLive=function(e,f){var g=this;if("function"==typeof e?(f=e,e={}):"object"!=typeof e&&(e={}),"boolean"!=typeof e.visibility&&(e.visibility=!1),"function"==typeof f){if(b.whenLiveElements||(b.whenLiveElements=[]),!b.whenLiveInit)if(b.whenLiveInit=!0,d){var h=new WebKitMutationObserver(function(a){for(var d=0;d<a.length;d++){var e=a[d];if(c(e.target),b.whenLiveElements.length)for(var f=0;f<e.addedNodes.length;f++){var g=e.addedNodes[f];c(g)}}});h.observe(document,{childList:!0,subtree:!0,attributes:!0})}else!function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),b.whenLiveLoop=function(){c(),b.whenLiveElements.length>0&&requestAnimationFrame(b.whenLiveLoop)};a.contains(e.context||document.documentElement,this[0])?e.visibility?b(this).is(":visible")?f():(b.whenLiveElements.push({elem:g,fn:f,options:e}),d||1===b.whenLiveElements.length&&requestAnimationFrame(b.whenLiveLoop)):f():(b.whenLiveElements.push({elem:g,fn:f,options:e}),d||1===b.whenLiveElements.length&&requestAnimationFrame(b.whenLiveLoop))}},b.event.special.whenLive={add:function(a){var c=a.data||{};b(this).whenLive({visibility:c.visibility,context:a.selector&&b(a.selector)},a.handler)}}}(a)});